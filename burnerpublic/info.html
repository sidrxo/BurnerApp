<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Info - APP NAME</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header>
        <a href="index.html">
            <img src="logo.png" alt="Logo" class="header-logo-img">
        </a>
        <a href="index.html" class="info-btn">CLOSE</a>
    </header>

    <div id="swup" class="transition-fade">
        <section class="info-layout">
            <div class="info-text-box">
                <h1>About<br>The Vision.</h1>
                <p>Burner is reimagining live experiences. We're building an event ticketing platform that helps you discover unforgettable moments and stay truly present when they happen.</p>
                <p>With innovative features like Burner Mode, secure payments, and seamless ticket management, we're making it easier than ever to connect with the experiences that matter most. Simple, secure, and designed for human connection.</p>
            </div>

            <div class="slideshow-container">
                <img id="active-slide" class="slideshow-img loading" alt="Event Gallery">
            </div>
        </section>
    </div>

    <footer>
        <div class="footer-content-grid">
            <div class="footer-lorem">
               <p>Burner is an event ticketing platform designed to help you discover live experiences and stay present during events. Simple, secure, and built for human connection.</p>
            </div>
            <nav class="footer-nav">
                <a href="privacy.html" class="footer-link">01. Privacy Policy</a>
                <a href="terms.html" class="footer-link">02. Terms of Service</a>
                <a href="faq.html" class="footer-link">03. Frequently Asked Questions</a>
                <a href="mailto:support@burner.app" class="footer-link">04. Contact Support</a>
            </nav>
        </div>
        <div class="footer-meta">&copy; 2025 Burner App Ltd.<br>ALL RIGHTS RESERVED.</div>
    </footer>

    <script src="https://unpkg.com/swup@4"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="config.js"></script>

    <script>
        function updateHeaderButton() {
            const btn = document.querySelector('.info-btn');
            if (!btn) return;
            if (window.location.pathname.includes('info.html')) {
                btn.textContent = "CLOSE";
                btn.href = "index.html";
            } else {
                btn.textContent = "INFO";
                btn.href = "info.html";
            }
        }

        async function startSlideshow() {
            const imgElement = document.getElementById('active-slide');
            if (!imgElement) return;

            const stopShimmer = () => {
                imgElement.classList.remove('loading');
                imgElement.classList.add('loaded');
            };

            if (window.slideInterval) clearInterval(window.slideInterval);
            imgElement.classList.remove('loaded');
            imgElement.classList.add('loading');

            if (!window.env) { console.error("config.js missing"); return; }
            const { SUPABASE_URL, SUPABASE_KEY, TABLE_NAME } = window.env;
            const _supabase = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

            const { data, error } = await _supabase.from(TABLE_NAME).select('image_url');
            
            if (error || !data || data.length === 0) { stopShimmer(); return; }

            const validRows = data.filter(row => row.image_url);
            if (validRows.length === 0) { stopShimmer(); return; }

            const shuffled = validRows.sort(() => 0.5 - Math.random());
            let index = 0;

            const tempImg = new Image();
            tempImg.src = shuffled[0].image_url;
            
            tempImg.onload = () => {
                imgElement.src = shuffled[0].image_url;
                stopShimmer();
                index = 1; 
                window.slideInterval = setInterval(() => {
                    imgElement.src = shuffled[index].image_url;
                    index = (index + 1) % shuffled.length; 
                }, 600);
            };
            tempImg.onerror = () => stopShimmer();
        }

        const swup = new Swup({ containers: ["#swup"], animationSelector: '[class*="transition-"]' });

        function initAll() {
            updateHeaderButton();
            startSlideshow();
        }

        if (document.readyState === 'complete' || document.readyState === 'interactive') {
            initAll();
        } else {
            document.addEventListener('DOMContentLoaded', initAll);
        }
        swup.hooks.on('page:view', initAll);
    </script>
</body>
</html>